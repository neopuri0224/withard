<div class="container-fluid">
  <div class="row">
  	<div class="col-2">
	  <div class="card position-fixed bg-dark" style="width: 14rem;">
		<%= image_tag (current_user.profile_image),class: 'profile_image card-img-top' if current_user.profile_image.attached? %>
	    <div class="card-body">
		  <h5 class="card-title"><%= current_user.name %></h5>
		</div>
		<div class="card-body">
		  <%= link_to 'My page', user_path(current_user.id),class: "btn btn-primary" %>
		  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
	        Post!  <i class="far fa-comment"></i>
	      </button>
	    </div>
	  </div>
	  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="false">
	    <div class="modal-dialog modal-bottom modal-lg" role="document">
	      <div class="modal-content bg-secondary">
	        <div class="modal-header">
	          <h5 class="modal-title" id="exampleModalLabel">Post!</h5>
	          <button type="button" class="close" data-dismiss="modal" aria-label="閉じる">
	            <span aria-hidden="true">&times;</span>
	          </button>
	        </div>
	        <%= form_with model: @post, url: posts_path do |f| %>
		        <div class="modal-body">
				  <div class="form-group">
				    <%= f.label :post_content %>
					<%= f.text_area :post_content,class: 'form-control' %>
				  </div>
				  <div class="form-group">
					  	<%= f.label :post_image %>
					  	<%= f.file_field :post_image,class: 'form-control' %>
				  </div>
		        </div>
		        <div class="modal-footer">
		          <button type="button" class="btn btn-secondary" data-dismiss="modal">閉じる</button>
		          <%= f.submit '投稿する', class: "btn btn-primary input-sm" %>
		        </div>
	        <% end %>
	      </div><!-- /.modal-content -->
	    </div><!-- /.modal-dialog -->
	  </div><!-- /.modal -->
    </div>
    <div class="col-8 offset-1">
      <div id="posts">
      	<div class="post">
	      <% @posts.each do |post| %>
		      <div class="card post bg-secondary shadow-lg mb-3">
		        <div class="media">
		          <a href="#" class="align-self-start mr-3">
		          <% if post.user.profile_image.attached? %>
			        <%= image_tag post.user.profile_image.variant(resize:'80x80').processed,style: 'border-radius: 50%;' %>
			      <% end %>
			      </a>
			      <div class="media-body">
			        <h5 class="mt-0"><%= post.user.name %></h5>
			        <p><%= post.post_content %>
					<% if post.post_image.attached? %>
					    <%= image_tag post.post_image.variant(resize:'100x200').processed %> <br>
					<% end %>
			        <%= link_to '削除', post_path(post), method: :delete, "data-confirm" => "削除しますか？" %></p>
			      </div>
		        </div>
		      </div>
	      <% end %>
	    </div>
      </div>
	  <div class="page-load-status">
		<div class="infinite-scroll-request">
		    <button class="btn btn-primary btn-lg" type="button" disabled>
			  Loading...
			</button>
		    <br>
		    <div hidden>
		      <%= paginate @posts %>
		    </div>
		</div>
      </div>
    </div>
  </div>
</div>